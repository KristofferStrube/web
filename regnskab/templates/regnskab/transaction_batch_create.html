{% extends "regnskab/base.html" %}
{% block head %}
<script>
function init() {
    var table = document.getElementById('transaction_form');
    var tbody = table.tBodies[0];
    var rows = tbody.rows;
    for (var i = 0; i < rows.length; ++i) {
        var paid_cell = rows[i].cells[0];
        var amount_cell = rows[i].cells[2];
        var paid_input = paid_cell.querySelector('input');
        var amount_input = amount_cell.querySelector('input');
        amount_input.addEventListener('input', function () {paid_input.checked=true}, false);
    }
}
window.addEventListener('load', init, false);
</script>
{% endblock %}
{% block title %}Opret betalinger/diverse køb{% endblock %}
{% block content %}
<h1>{{ header }}</h1>

{% if session %}<p><a href="{% url 'session_update' pk=session.pk %}">
    Gå tilbage til opgørelsen</a></p>{% endif %}

<form method="post">{% csrf_token %}
    <table id="transaction_form">
        <thead><tr><th></th><th>Navn</th><th>Beløb</th></tr></thead>
        <tbody>
    {% for profile, amount, selected in form.profile_fields %}
    <tr>
        <td>{{ selected }}{{ selected.errors }}</td>
        <td><label for="{{ selected.id_for_label }}">{{ profile.display_name }}</label></td>
        <td>{{ amount }}</td>
    </tr>
    {% endfor %}
        </tbody>
    </table>
    <input type="submit" value="{{ save_label }}" />
</form>
{% endblock %}
