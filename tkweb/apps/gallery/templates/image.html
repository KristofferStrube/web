{% extends 'base.html' %}
{% load thumbnail %}
{% load staticfiles %}

{% block title %}{{ album.title }}{% endblock title %}

{% block js %}
  <script src="{% static "jquery.touchswipe.min.js" %}"></script>
  <script src="{% static "tkgal.js" %}"></script>
{% endblock js%}

{% block content %}
<div class="row">
  <div class="col-xs-12 col-sm-7">
    <h3>{{ album.title }} <small>{% if album.eventalbum %}{{ album.publish_date }}{% else %}{{ album.gfyear}}{% endif %}</small></h3>
  </div>
  <div class="col-xs-12 col-sm-5 text-right">
    <p id="tkgal_controls">
          <a class="tkgal_link prev"
             link="{{ prev_image.slug }}"
             href="{% url 'image' gfyear=album.gfyear album_slug=album.slug image_slug=prev_image.slug %}">Forige</a> |
          <a class="tkgal_url_base"
             href="{% url 'album' gfyear=album.gfyear album_slug=album.slug %}">Tilbage til album</a> |
          <a class="tkgal_link next"
             link="{{ next_image.slug }}"
             href="{% url 'image' gfyear=album.gfyear album_slug=album.slug image_slug=next_image.slug %}">NÃ¦ste</a>
  </div>
</div>
<div class="tkgal_container">
  {% for image in album.images.all %}
  <div permlink="{{ image.slug }}" {% ifequal image start_image %}class="current"{% endifequal %}>
    {% thumbnail image.image '400' as xs %}{# De 400 her er /ikke/ taget fra bootstrap3 #}
    {% thumbnail image.image '720' as sm %}
    {% thumbnail image.image '940' as ml %}
    {% thumbnail image.image '1140' as lg %}
    <img class="img-responsive {% ifequal image start_image %}current{% endifequal %}"
         alt="{{ album.slug }}/{{ image.slug }}"
         sizes="(max-width: 768px) calc(100vw - 15px),
                (max-width: 992px) 720px,
                (max-width: 1200px) 940px,
                100vw"
         srcset="{{ xs.url }} {{ xs.x }}w,
                 {{ sm.url }} {{ sm.x }}w,
                 {{ ml.url }} {{ ml.x }}w,
                 {{ lg.url }} {{ lg.x }}w"
         src="{{ sm.url }}">
    {% endthumbnail %}{% endthumbnail %}{% endthumbnail %}{% endthumbnail %}
    <p>{{ image.date }}</p>
  </div> <!-- permlink, current? -->
  {% endfor %}
</div>
{% endblock content%}
