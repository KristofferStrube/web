{% extends 'base.html' %}
{% load staticfiles %}
{% load bootstrap3 %}
{% load tkbrand %}

{% block title %}{{ album.title }}{% endblock title %}
{% block navbar_class %}navbar-static-top{% endblock navbar_class %}

{% block js %}
  <script src="{% static "gallery/jquery.touchswipe.min.js" %}"></script>
  <script src="{% static "gallery/tkgal.js" %}"></script>
{% endblock js %}

{% block extra_head %}
  <link rel="canonical" href="{% url 'album' gfyear=album.gfyear album_slug=album.slug %}">
{% endblock extra_head %}

{% block content %}
<div class="row">
  <div class="col-xs-12 col-sm-9">
      <ol class="breadcrumb imagetitle">
        <li><a href="{% url 'gfyear' gfyear=album.gfyear  %}">{{ album.gfyear|gfyearPPslash }}</a></li>
        <li><a href="{% url 'album' gfyear=album.gfyear album_slug=album.slug %}">{{ album.title }}</a></li>
        <li class="active"><span id="tkgal-index">{% for file in files %}{% ifequal file start_file %}{{ forloop.counter }}{% endifequal %}{% endfor %}</span> af {{ files|length }} <span class="hidden-xs">billede{{ files|length|pluralize:"r" }}</span></li>
      </ol>

  </div>
  <div class="col-xs-12 col-sm-3 text-right">
      <p class="imagetitle">
          <a id="tkgal-prev"
             class="tkgal-control"
             rel="prev"
             href="{{ prev_file.slug }}">Forrige</a> |
          <a id="tkgal-next"
             class="tkgal-control"
             rel="next"
             href="{{ next_file.slug }}">NÃ¦ste</a>
  </div>
</div>
<div class="row">
<div id="tkgal-container" class="col-xs-12">
  {% for file in files %}
    <div permlink="{{ file.slug }}" {% if file == start_file %}class="current"{% endif %}>
      {% if file.file.thumbnail.720x720.url %}
        <img class="img-responsive"
             alt="{{ album.slug }}/{{ file.slug }}"
             {% if file != start_file and file != next_file and file != prev_file %}data-{% endif %}srcset="
                 {{ file.file.thumbnail.400x400.url }} 400w,
                 {{ file.file.thumbnail.720x720.url }} 720w,
                 {{ file.file.thumbnail.940x940.url }} 940w,
                 {{ file.file.thumbnail.1140x1140.url }} 1140w,
                 {{ file.file.thumbnail.2280x2280.url }} 2280w"
             src="{{ file.file.thumbnail.720x720.url }}">
    {% elif file.type == "A" %}
    <audio controls>
        <source src="{{ file.file.url }}" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    {% elif file.type == "V" %}
    <video controls>
        <source src="{{ file.file.url }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    {% else %}
    <div id="lg-file-download" class="text-center">
        <a href="{{ file.file.url }}">
            <button type="button" class="btn btn-default btn-lg">
            {% bootstrap_icon "download-alt" %}
            {{ file.slug }}
            ({{ file.file.size|filesizeformat }})
            </button>
        </a>
    </div>
    {% endif %}
    {{ file.date|default_if_none:"" }}
    <div class="pull-right">
        <a href="{{ file.file.url }}">
            {% bootstrap_icon "download-alt" %}
            ({{ file.file.size|filesizeformat }})</a>
    </div>
  </div> <!-- permlink, current? -->
  {% endfor %}
</div>
</div>
{% endblock content %}
